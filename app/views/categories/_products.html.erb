<div class="row">
  <div class="col-sm-12 col-xs-12">
    <div class="all_products_div">
      <% @products.each_with_index do |product, i| %>
        <div class="col-md-4 col-xs-12 product_view_class">
          <a data-toggle="modal" data-target="#product_view_<%= i+1 %>">
            <div class="item-category">
              <%= image_tag product.image.url(:medium), class: 'image-product-category-index' %>
              <%= tag.div :class => "product_price_text" do %>
                <% if product.discount %>
                    <%= "Скидка #{number_to_percentage(product.discount, precision: 0)}" %>
                <% end %>
              <% end %>
              <%= tag.div(product.title.mb_chars.capitalize.to_s, :class => "product_title_text") %>
              <%= tag.div(number_to_currency(product.price, unit: "₴"), :class => "product_price_text") %>
              <%= if product.quantity then tag.div("Остаток #{product.quantity}", :class => "product_quantity_text") else tag.div("Под заказ", :class => "  product_quantity_text") end %>
              <%= tag.div(product.product_code, :class => "product_code_text") %>
              <%= button_to 'В корзину', product_line_items_path(product.id), :class => "buttom_add_to_cart" %>
            </div>
          </a>
        </div>
        <%= render 'modal_window', product: product, i: i %>
      <% end %>
    </div>
  </div>
</div>
<div class="row">
  <center>
    <%= will_paginate @products, renderer: BootstrapPagination::Rails %>
  </center>
</div>
